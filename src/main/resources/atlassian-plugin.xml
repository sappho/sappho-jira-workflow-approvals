<atlassian-plugin key="${project.groupId}.${project.artifactId}"
	name="${project.name}">

	<plugin-info>
		<description>${project.name}</description>
		<version>${project.version}</version>
		<application-version min="3.5" max="4.0" />
		<vendor name="Sappho OSS" url="http://www.sappho.org.uk" />
	</plugin-info>

	<workflow-function
		key="${project.groupId}.${project.artifactId}.ApproveAction" name="Approve Parent Issue"
		class="uk.org.sappho.jira.workflow.approvals.ApprovalTypeFactory">
		<description>Grant approval on parent issue</description>
		<function-class>uk.org.sappho.jira.workflow.approvals.ApproveAction
		</function-class>
		<orderable>true</orderable>
		<unique>true</unique>
		<deletable>true</deletable>
		<resource type="velocity" name="view"
			location="templates/uk/org/sappho/jira/workflow/approvals/view-ApproveAction.vm" />
		<resource type="velocity" name="input-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
		<resource type="velocity" name="edit-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
	</workflow-function>

	<workflow-function
		key="${project.groupId}.${project.artifactId}.DeclineAction" name="Decline Parent Issue"
		class="com.atlassian.jira.plugin.workflow.WorkflowNoInputPluginFactory">
		<description>Decline approval on parent issue</description>
		<function-class>uk.org.sappho.jira.workflow.approvals.DeclineAction
		</function-class>
		<orderable>true</orderable>
		<unique>true</unique>
		<deletable>true</deletable>
		<resource type="velocity" name="view"
			location="templates/uk/org/sappho/jira/workflow/approvals/view-DeclineAction.vm" />
	</workflow-function>

	<workflow-function
		key="${project.groupId}.${project.artifactId}.ReconsiderAction" name="Reconsider Parent Issue"
		class="com.atlassian.jira.plugin.workflow.WorkflowNoInputPluginFactory">
		<description>Reconsider approval on parent issue</description>
		<function-class>uk.org.sappho.jira.workflow.approvals.ReconsiderAction
		</function-class>
		<orderable>true</orderable>
		<unique>true</unique>
		<deletable>true</deletable>
		<resource type="velocity" name="view"
			location="templates/uk/org/sappho/jira/workflow/approvals/view-ReconsiderAction.vm" />
	</workflow-function>

	<workflow-condition
		key="${project.groupId}.${project.artifactId}.ApprovalCondition" name="Check Approval Issue Live"
		class="uk.org.sappho.jira.workflow.approvals.ApprovalTypeFactory">
		<description>Check that the parent issue is currently open to being approved</description>
		<condition-class>uk.org.sappho.jira.workflow.approvals.ApprovalCondition
		</condition-class>
		<orderable>true</orderable>
		<unique>true</unique>
		<deletable>true</deletable>
		<resource type="velocity" name="view"
			location="templates/uk/org/sappho/jira/workflow/approvals/view-ApprovalCondition.vm" />
		<resource type="velocity" name="input-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
		<resource type="velocity" name="edit-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
	</workflow-condition>

	<workflow-function
		key="${project.groupId}.${project.artifactId}.SeekApprovalAction"
		name="Seek Approval" class="uk.org.sappho.jira.workflow.approvals.ApprovalTypeFactory">
		<description>Seek approval by creating approval sub-tasks
		</description>
		<function-class>uk.org.sappho.jira.workflow.approvals.SeekApprovalAction
		</function-class>
		<orderable>true</orderable>
		<unique>true</unique>
		<deletable>true</deletable>
		<resource type="velocity" name="view"
			location="templates/uk/org/sappho/jira/workflow/approvals/view-SeekApprovalAction.vm" />
		<resource type="velocity" name="input-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
		<resource type="velocity" name="edit-parameters"
			location="templates/uk/org/sappho/jira/workflow/approvals/edit-ApprovalType.vm" />
	</workflow-function>

</atlassian-plugin>
